---
- name: create the application group
  group:
    name: "{{ himation_group }}"
    state: present

- name: create the application user
  user:
    name: "{{ himation_user }}"
    group: "{{ himation_group }}"
    comment: "Himation application user"
    state: present

- name: fetch the source code
  git:
    accept_hostkey: yes
    clone: yes
    dest: "{{ himation_source_dir }}"
    repo: git@github.com:justinlocsei/himation.git
    update: yes
    version: "{{ himation_git_branch }}"

- name: install dependencies
  npm:
    path: "{{ himation_source_dir }}"
    state: present
